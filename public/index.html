<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>YouTube Analysis</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    input[type=text] { width: 60%; padding: 8px; }
    button { padding: 8px 14px; }
    #status { margin-top: 12px; }
  </style>
</head>
<body>
  <h2>YouTube Analysis</h2>
  <p>Paste a YouTube URL and press Analyze.</p>
  <input id="url" type="text" placeholder="https://www.youtube.com/watch?v=..." />
  <button id="go">Analyze</button>
  <div id="status"></div>
  <script>
    document.getElementById('go').onclick = async () => {
      const url = document.getElementById('url').value.trim();
      if (!url) { document.getElementById('status').innerText = 'Enter URL'; return; }
      document.getElementById('status').innerText = 'Requesting analysis...';
      const res = await fetch('/analyze', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ youtubeUrl: url })
      });
      const json = await res.json();
      if (json.id) {
        document.getElementById('status').innerHTML = 'Queued. Result: <a href="/result/' + json.id + '">/result/' + json.id + '</a>';
      } else {
        document.getElementById('status').innerText = JSON.stringify(json);
      }
    };
  </script>
</body>
</html>
